{
 "cells": [
  {
   "cell_type": "code",
   "execution_count": 'null',
   "metadata": {},
   "outputs": [],
   "source": [
    " !pip install selenium\n",
    " !pip install bs4\n",
    "\n",
    "# 패키지 설치 -> 처음 실행할 때만 설치하면 됨"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 9,
   "metadata": {},
   "outputs": [],
   "source": [
    "import requests\n",
    "from selenium import webdriver\n",
    "import time\n",
    "from bs4 import BeautifulSoup\n",
    "import urllib.parse\n",
    "import re\n",
    "import csv"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 10,
   "metadata": {},
   "outputs": [],
   "source": [
    "def get_news_links(page_num, link_pattern):\n",
    "    links = []\n",
    "    for page in range(page_num):\n",
    "        print(f\"Scrapping page: {page+1}\") # 확인용\n",
    "        req = requests.get(f\"{URL}&start={10*page+1}\"); print(req.status_code)\n",
    "        soup = BeautifulSoup(req.text, 'lxml')\n",
    "        results = soup.find_all('a', {'href': re.compile(link_pattern)})\n",
    "        for result in results:\n",
    "            links.append(result['href'])\n",
    "    print(f\"총 {len(links)}개의 뉴스 링크를 찾았습니다.\") # 확인용\n",
    "    return links"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 11,
   "metadata": {},
   "outputs": [],
   "source": [
    "QUERY = \"관악구\" # 키워드\n",
    "search_QUERY = urllib.parse.urlencode({'query':QUERY}, encoding='utf-8')\n",
    "URL = f\"https://search.naver.com/search.naver?&where=news&{search_QUERY}&sm=tab_pge&sort=0&photo=0&field=0&reporter_article=&pd=3&ds=2021.01.01&de=2021.03.31&docid=&nso=so:r,p:from20210101to20210331,a:all&mynews=0\"\n",
    "# 기간 설정\n",
    "# url 날짜 변경  &pd=3&ds=2020.05.01&de=2021.04.30&docid=&nso=so:r,p:from20200501to20210430 \n",
    "# ds(시작날짜), de(끝나는날짜), from(시작날짜), to(끝나는날짜)\n",
    "\n",
    "LINK_PAT = \"https:\\/\\/news\\.naver\\.com\\/main\\/read\\.nhn\\?\"\n",
    "search_PAGE = 400 # 최대 400 (한페이지당 12)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 12,
   "metadata": {},
   "outputs": [],
   "source": [
    "def extract_info(url, wait_time=1, delay_time=0.3):\n",
    "    driver.implicitly_wait(wait_time)\n",
    "    driver.get(url)\n",
    "\n",
    "    # html 페이지 읽어오기\n",
    "    html = driver.page_source\n",
    "    soup = BeautifulSoup(html, 'lxml')\n",
    "    \n",
    "    try:\n",
    "        \n",
    "        title = soup.find('h3', {'id':'articleTitle'}).get_text(strip=True)\n",
    "        \n",
    "        contents = soup.find_all(\"div\", {\"class\":\"_article_body_contents\"})\n",
    "        contents = [content.text for content in contents]\n",
    "        \n",
    "        print(\"완료\", end=' ') # 확인용\n",
    "        return {'site':url, 'title':title, 'contents':contents}\n",
    "\n",
    "    except:\n",
    "        print(\"오류\", end=' ')\n",
    "        return {'site':None, 'title':None, 'contents':None}\n",
    "    \n",
    "# 각 페이지 돌면서 스크레이핑\n",
    "\n",
    "def extract_contents(links):\n",
    "    contents = []\n",
    "    a = 1\n",
    "    for link in links:\n",
    "        content = extract_info(f\"{link}\") # 각 링크에 대해 extract_info함수 추출\n",
    "        print(a)\n",
    "        contents.append(content) # 결과 저장\n",
    "        a += 1\n",
    "    return contents"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 13,
   "metadata": {},
   "outputs": [],
   "source": [
    "def save_to_file(lst):\n",
    "    file = open(/C:/Users/juyeo/Desktop/상권분석/news_contents_Naver.csv\", mode=\"w\", encoding=\"utf-8-sig\")\n",
    "    # file 저장 주소 변경 -> 결과 csv 파일 저장 경로\n",
    "    writer = csv.writer(file)\n",
    "    writer.writerow(['site', 'title', 'contents'])\n",
    "    for result in lst:\n",
    "        writer.writerow(list(result.values()))\n",
    "    file.close()\n",
    "    return"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 14,
   "metadata": {},
   "outputs": [],
   "source": [
    "# main 함수\n",
    "\n",
    "def main():\n",
    "    last_page = search_PAGE\n",
    "    news_links = get_news_links(search_PAGE, LINK_PAT)\n",
    "    result = extract_contents(news_links)\n",
    "    driver.quit()\n",
    "    return result"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 15,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Scrapping page: 1\n",
      "200\n",
      "Scrapping page: 2\n",
      "200\n",
      "Scrapping page: 3\n",
      "200\n",
      "Scrapping page: 4\n",
      "200\n",
      "Scrapping page: 5\n",
      "200\n",
      "Scrapping page: 6\n",
      "200\n",
      "Scrapping page: 7\n",
      "200\n",
      "Scrapping page: 8\n",
      "200\n",
      "Scrapping page: 9\n",
      "200\n",
      "Scrapping page: 10\n",
      "200\n",
      "Scrapping page: 11\n",
      "200\n",
      "Scrapping page: 12\n",
      "200\n",
      "Scrapping page: 13\n",
      "200\n",
      "Scrapping page: 14\n",
      "200\n",
      "Scrapping page: 15\n",
      "200\n",
      "Scrapping page: 16\n",
      "200\n",
      "Scrapping page: 17\n",
      "200\n",
      "Scrapping page: 18\n",
      "200\n",
      "Scrapping page: 19\n",
      "200\n",
      "Scrapping page: 20\n",
      "200\n",
      "Scrapping page: 21\n",
      "200\n",
      "Scrapping page: 22\n",
      "200\n",
      "Scrapping page: 23\n",
      "200\n",
      "Scrapping page: 24\n",
      "200\n",
      "Scrapping page: 25\n",
      "200\n",
      "Scrapping page: 26\n",
      "200\n",
      "Scrapping page: 27\n",
      "200\n",
      "Scrapping page: 28\n",
      "200\n",
      "Scrapping page: 29\n",
      "200\n",
      "Scrapping page: 30\n",
      "200\n",
      "Scrapping page: 31\n",
      "200\n",
      "Scrapping page: 32\n",
      "200\n",
      "Scrapping page: 33\n",
      "200\n",
      "Scrapping page: 34\n",
      "200\n",
      "Scrapping page: 35\n",
      "200\n",
      "Scrapping page: 36\n",
      "200\n",
      "Scrapping page: 37\n",
      "200\n",
      "Scrapping page: 38\n",
      "200\n",
      "Scrapping page: 39\n",
      "200\n",
      "Scrapping page: 40\n",
      "200\n",
      "Scrapping page: 41\n",
      "200\n",
      "Scrapping page: 42\n",
      "200\n",
      "Scrapping page: 43\n",
      "200\n",
      "Scrapping page: 44\n",
      "200\n",
      "Scrapping page: 45\n",
      "200\n",
      "Scrapping page: 46\n",
      "200\n",
      "Scrapping page: 47\n",
      "200\n",
      "Scrapping page: 48\n",
      "200\n",
      "Scrapping page: 49\n",
      "200\n",
      "Scrapping page: 50\n",
      "200\n",
      "Scrapping page: 51\n",
      "200\n",
      "Scrapping page: 52\n",
      "200\n",
      "Scrapping page: 53\n",
      "200\n",
      "Scrapping page: 54\n",
      "200\n",
      "Scrapping page: 55\n",
      "200\n",
      "Scrapping page: 56\n",
      "200\n",
      "Scrapping page: 57\n",
      "200\n",
      "Scrapping page: 58\n",
      "200\n",
      "Scrapping page: 59\n",
      "200\n",
      "Scrapping page: 60\n",
      "200\n",
      "Scrapping page: 61\n",
      "200\n",
      "Scrapping page: 62\n",
      "200\n",
      "Scrapping page: 63\n",
      "200\n",
      "Scrapping page: 64\n",
      "200\n",
      "Scrapping page: 65\n",
      "200\n",
      "Scrapping page: 66\n",
      "200\n",
      "Scrapping page: 67\n",
      "200\n",
      "Scrapping page: 68\n",
      "200\n",
      "Scrapping page: 69\n",
      "200\n",
      "Scrapping page: 70\n",
      "200\n",
      "Scrapping page: 71\n",
      "200\n",
      "Scrapping page: 72\n",
      "200\n",
      "Scrapping page: 73\n",
      "200\n",
      "Scrapping page: 74\n",
      "200\n",
      "Scrapping page: 75\n",
      "200\n",
      "Scrapping page: 76\n",
      "200\n",
      "Scrapping page: 77\n",
      "200\n",
      "Scrapping page: 78\n",
      "200\n",
      "Scrapping page: 79\n",
      "200\n",
      "Scrapping page: 80\n",
      "200\n",
      "Scrapping page: 81\n",
      "200\n",
      "Scrapping page: 82\n",
      "200\n",
      "Scrapping page: 83\n",
      "200\n",
      "Scrapping page: 84\n",
      "200\n",
      "Scrapping page: 85\n",
      "200\n",
      "Scrapping page: 86\n",
      "200\n",
      "Scrapping page: 87\n",
      "200\n",
      "Scrapping page: 88\n",
      "200\n",
      "Scrapping page: 89\n",
      "200\n",
      "Scrapping page: 90\n",
      "200\n",
      "Scrapping page: 91\n",
      "200\n",
      "Scrapping page: 92\n",
      "200\n",
      "Scrapping page: 93\n",
      "200\n",
      "Scrapping page: 94\n",
      "200\n",
      "Scrapping page: 95\n",
      "200\n",
      "Scrapping page: 96\n",
      "200\n",
      "Scrapping page: 97\n",
      "200\n",
      "Scrapping page: 98\n",
      "200\n",
      "Scrapping page: 99\n",
      "200\n",
      "Scrapping page: 100\n",
      "200\n",
      "Scrapping page: 101\n",
      "200\n",
      "Scrapping page: 102\n",
      "200\n",
      "Scrapping page: 103\n",
      "200\n",
      "Scrapping page: 104\n",
      "200\n",
      "Scrapping page: 105\n",
      "200\n",
      "Scrapping page: 106\n",
      "200\n",
      "Scrapping page: 107\n",
      "200\n",
      "Scrapping page: 108\n",
      "200\n",
      "Scrapping page: 109\n",
      "200\n",
      "Scrapping page: 110\n",
      "200\n",
      "Scrapping page: 111\n",
      "200\n",
      "Scrapping page: 112\n",
      "200\n",
      "Scrapping page: 113\n",
      "200\n",
      "Scrapping page: 114\n",
      "200\n",
      "Scrapping page: 115\n",
      "200\n",
      "Scrapping page: 116\n",
      "200\n",
      "Scrapping page: 117\n",
      "200\n",
      "Scrapping page: 118\n",
      "200\n",
      "Scrapping page: 119\n",
      "200\n",
      "Scrapping page: 120\n",
      "200\n",
      "Scrapping page: 121\n",
      "200\n",
      "Scrapping page: 122\n",
      "200\n",
      "Scrapping page: 123\n",
      "200\n",
      "Scrapping page: 124\n",
      "200\n",
      "Scrapping page: 125\n",
      "200\n",
      "Scrapping page: 126\n",
      "200\n",
      "Scrapping page: 127\n",
      "200\n",
      "Scrapping page: 128\n",
      "200\n",
      "Scrapping page: 129\n",
      "200\n",
      "Scrapping page: 130\n",
      "200\n",
      "Scrapping page: 131\n",
      "200\n",
      "Scrapping page: 132\n",
      "200\n",
      "Scrapping page: 133\n",
      "200\n",
      "Scrapping page: 134\n",
      "200\n",
      "Scrapping page: 135\n",
      "200\n",
      "Scrapping page: 136\n",
      "200\n",
      "Scrapping page: 137\n",
      "200\n",
      "Scrapping page: 138\n",
      "200\n",
      "Scrapping page: 139\n",
      "200\n",
      "Scrapping page: 140\n",
      "200\n",
      "Scrapping page: 141\n",
      "200\n",
      "Scrapping page: 142\n",
      "200\n",
      "Scrapping page: 143\n",
      "200\n",
      "Scrapping page: 144\n",
      "200\n",
      "Scrapping page: 145\n",
      "200\n",
      "Scrapping page: 146\n",
      "200\n",
      "Scrapping page: 147\n",
      "200\n",
      "Scrapping page: 148\n",
      "200\n",
      "Scrapping page: 149\n",
      "200\n",
      "Scrapping page: 150\n",
      "200\n",
      "Scrapping page: 151\n",
      "200\n",
      "Scrapping page: 152\n",
      "200\n",
      "Scrapping page: 153\n",
      "200\n",
      "Scrapping page: 154\n",
      "200\n",
      "Scrapping page: 155\n",
      "200\n",
      "Scrapping page: 156\n",
      "200\n",
      "Scrapping page: 157\n",
      "200\n",
      "Scrapping page: 158\n",
      "200\n",
      "Scrapping page: 159\n",
      "200\n",
      "Scrapping page: 160\n",
      "200\n",
      "Scrapping page: 161\n",
      "200\n",
      "Scrapping page: 162\n",
      "200\n",
      "Scrapping page: 163\n",
      "200\n",
      "Scrapping page: 164\n",
      "200\n",
      "Scrapping page: 165\n",
      "200\n",
      "Scrapping page: 166\n",
      "200\n",
      "Scrapping page: 167\n",
      "200\n",
      "Scrapping page: 168\n",
      "200\n",
      "Scrapping page: 169\n",
      "200\n",
      "Scrapping page: 170\n",
      "200\n",
      "Scrapping page: 171\n",
      "200\n",
      "Scrapping page: 172\n",
      "200\n",
      "Scrapping page: 173\n",
      "200\n",
      "Scrapping page: 174\n",
      "200\n",
      "Scrapping page: 175\n",
      "200\n",
      "Scrapping page: 176\n",
      "200\n",
      "Scrapping page: 177\n",
      "200\n",
      "Scrapping page: 178\n",
      "200\n",
      "Scrapping page: 179\n",
      "200\n",
      "Scrapping page: 180\n",
      "200\n",
      "Scrapping page: 181\n",
      "200\n",
      "Scrapping page: 182\n",
      "200\n",
      "Scrapping page: 183\n",
      "200\n",
      "Scrapping page: 184\n",
      "200\n",
      "Scrapping page: 185\n",
      "200\n",
      "Scrapping page: 186\n",
      "200\n",
      "Scrapping page: 187\n",
      "200\n",
      "Scrapping page: 188\n",
      "200\n",
      "Scrapping page: 189\n",
      "200\n",
      "Scrapping page: 190\n",
      "200\n",
      "Scrapping page: 191\n",
      "200\n",
      "Scrapping page: 192\n",
      "200\n",
      "Scrapping page: 193\n",
      "200\n",
      "Scrapping page: 194\n",
      "200\n",
      "Scrapping page: 195\n",
      "200\n",
      "Scrapping page: 196\n",
      "200\n",
      "Scrapping page: 197\n",
      "200\n",
      "Scrapping page: 198\n",
      "200\n",
      "Scrapping page: 199\n",
      "200\n",
      "Scrapping page: 200\n",
      "200\n",
      "Scrapping page: 201\n",
      "200\n",
      "Scrapping page: 202\n",
      "200\n",
      "Scrapping page: 203\n",
      "200\n",
      "Scrapping page: 204\n",
      "200\n",
      "Scrapping page: 205\n",
      "200\n",
      "Scrapping page: 206\n",
      "200\n",
      "Scrapping page: 207\n",
      "200\n",
      "Scrapping page: 208\n",
      "200\n",
      "Scrapping page: 209\n",
      "200\n",
      "Scrapping page: 210\n",
      "200\n",
      "Scrapping page: 211\n",
      "200\n",
      "Scrapping page: 212\n",
      "200\n",
      "Scrapping page: 213\n",
      "200\n",
      "Scrapping page: 214\n",
      "200\n",
      "Scrapping page: 215\n",
      "200\n",
      "Scrapping page: 216\n",
      "200\n",
      "Scrapping page: 217\n",
      "200\n",
      "Scrapping page: 218\n",
      "200\n",
      "Scrapping page: 219\n",
      "200\n",
      "Scrapping page: 220\n",
      "200\n",
      "Scrapping page: 221\n",
      "200\n",
      "Scrapping page: 222\n",
      "200\n",
      "Scrapping page: 223\n",
      "200\n",
      "Scrapping page: 224\n",
      "200\n",
      "Scrapping page: 225\n",
      "200\n",
      "Scrapping page: 226\n",
      "200\n",
      "Scrapping page: 227\n",
      "200\n",
      "Scrapping page: 228\n",
      "200\n",
      "Scrapping page: 229\n",
      "200\n",
      "Scrapping page: 230\n",
      "200\n",
      "Scrapping page: 231\n",
      "200\n",
      "Scrapping page: 232\n",
      "200\n",
      "Scrapping page: 233\n",
      "200\n",
      "Scrapping page: 234\n",
      "200\n",
      "Scrapping page: 235\n",
      "200\n",
      "Scrapping page: 236\n",
      "200\n",
      "Scrapping page: 237\n",
      "200\n",
      "Scrapping page: 238\n",
      "200\n",
      "Scrapping page: 239\n",
      "200\n",
      "Scrapping page: 240\n",
      "200\n",
      "Scrapping page: 241\n",
      "200\n",
      "Scrapping page: 242\n",
      "200\n",
      "Scrapping page: 243\n",
      "200\n",
      "Scrapping page: 244\n",
      "200\n",
      "Scrapping page: 245\n",
      "200\n",
      "Scrapping page: 246\n",
      "200\n",
      "Scrapping page: 247\n",
      "200\n",
      "Scrapping page: 248\n",
      "200\n",
      "Scrapping page: 249\n",
      "200\n",
      "Scrapping page: 250\n",
      "200\n",
      "Scrapping page: 251\n",
      "200\n",
      "Scrapping page: 252\n",
      "200\n",
      "Scrapping page: 253\n",
      "200\n",
      "Scrapping page: 254\n",
      "200\n",
      "Scrapping page: 255\n",
      "200\n",
      "Scrapping page: 256\n",
      "200\n",
      "Scrapping page: 257\n",
      "200\n",
      "Scrapping page: 258\n",
      "200\n",
      "Scrapping page: 259\n",
      "200\n",
      "Scrapping page: 260\n",
      "200\n",
      "Scrapping page: 261\n",
      "200\n",
      "Scrapping page: 262\n",
      "200\n",
      "Scrapping page: 263\n",
      "200\n",
      "Scrapping page: 264\n",
      "200\n",
      "Scrapping page: 265\n",
      "200\n",
      "Scrapping page: 266\n",
      "200\n",
      "Scrapping page: 267\n",
      "200\n",
      "Scrapping page: 268\n",
      "200\n",
      "Scrapping page: 269\n",
      "200\n",
      "Scrapping page: 270\n",
      "200\n",
      "Scrapping page: 271\n",
      "200\n",
      "Scrapping page: 272\n",
      "200\n",
      "Scrapping page: 273\n",
      "200\n",
      "Scrapping page: 274\n",
      "200\n",
      "Scrapping page: 275\n",
      "200\n",
      "Scrapping page: 276\n",
      "200\n",
      "Scrapping page: 277\n",
      "200\n",
      "Scrapping page: 278\n",
      "200\n",
      "Scrapping page: 279\n",
      "200\n",
      "Scrapping page: 280\n",
      "200\n",
      "Scrapping page: 281\n",
      "200\n",
      "Scrapping page: 282\n",
      "200\n",
      "Scrapping page: 283\n",
      "200\n",
      "Scrapping page: 284\n",
      "200\n",
      "Scrapping page: 285\n",
      "200\n",
      "Scrapping page: 286\n",
      "200\n",
      "Scrapping page: 287\n",
      "200\n",
      "Scrapping page: 288\n",
      "200\n",
      "Scrapping page: 289\n",
      "200\n",
      "Scrapping page: 290\n",
      "200\n",
      "Scrapping page: 291\n",
      "200\n",
      "Scrapping page: 292\n",
      "200\n",
      "Scrapping page: 293\n",
      "200\n",
      "Scrapping page: 294\n",
      "200\n",
      "Scrapping page: 295\n",
      "200\n",
      "Scrapping page: 296\n",
      "200\n",
      "Scrapping page: 297\n",
      "200\n",
      "Scrapping page: 298\n",
      "200\n",
      "Scrapping page: 299\n",
      "200\n",
      "Scrapping page: 300\n",
      "200\n",
      "Scrapping page: 301\n",
      "200\n",
      "Scrapping page: 302\n",
      "200\n",
      "Scrapping page: 303\n",
      "200\n",
      "Scrapping page: 304\n",
      "200\n",
      "Scrapping page: 305\n",
      "200\n",
      "Scrapping page: 306\n",
      "200\n",
      "Scrapping page: 307\n",
      "200\n",
      "Scrapping page: 308\n",
      "200\n",
      "Scrapping page: 309\n",
      "200\n",
      "Scrapping page: 310\n",
      "200\n",
      "Scrapping page: 311\n",
      "200\n",
      "Scrapping page: 312\n",
      "200\n",
      "Scrapping page: 313\n",
      "200\n",
      "Scrapping page: 314\n",
      "200\n",
      "Scrapping page: 315\n",
      "200\n",
      "Scrapping page: 316\n",
      "200\n",
      "Scrapping page: 317\n",
      "200\n",
      "Scrapping page: 318\n",
      "200\n",
      "Scrapping page: 319\n",
      "200\n",
      "Scrapping page: 320\n",
      "200\n",
      "Scrapping page: 321\n",
      "200\n",
      "Scrapping page: 322\n",
      "200\n",
      "Scrapping page: 323\n",
      "200\n",
      "Scrapping page: 324\n",
      "200\n",
      "Scrapping page: 325\n",
      "200\n",
      "Scrapping page: 326\n",
      "200\n",
      "Scrapping page: 327\n",
      "200\n",
      "Scrapping page: 328\n",
      "200\n",
      "Scrapping page: 329\n",
      "200\n",
      "Scrapping page: 330\n",
      "200\n",
      "Scrapping page: 331\n",
      "200\n",
      "Scrapping page: 332\n",
      "200\n",
      "Scrapping page: 333\n",
      "200\n",
      "Scrapping page: 334\n",
      "200\n",
      "Scrapping page: 335\n",
      "200\n",
      "Scrapping page: 336\n",
      "200\n",
      "Scrapping page: 337\n",
      "200\n",
      "Scrapping page: 338\n",
      "200\n",
      "Scrapping page: 339\n",
      "200\n",
      "Scrapping page: 340\n",
      "200\n",
      "Scrapping page: 341\n",
      "200\n",
      "Scrapping page: 342\n",
      "200\n",
      "Scrapping page: 343\n",
      "200\n",
      "Scrapping page: 344\n",
      "200\n",
      "Scrapping page: 345\n",
      "200\n",
      "Scrapping page: 346\n",
      "200\n",
      "Scrapping page: 347\n",
      "200\n",
      "Scrapping page: 348\n",
      "200\n",
      "Scrapping page: 349\n",
      "200\n",
      "Scrapping page: 350\n",
      "200\n",
      "Scrapping page: 351\n",
      "200\n",
      "Scrapping page: 352\n",
      "200\n",
      "Scrapping page: 353\n",
      "200\n",
      "Scrapping page: 354\n",
      "200\n",
      "Scrapping page: 355\n",
      "200\n",
      "Scrapping page: 356\n",
      "200\n",
      "Scrapping page: 357\n",
      "200\n",
      "Scrapping page: 358\n",
      "200\n",
      "Scrapping page: 359\n",
      "200\n",
      "Scrapping page: 360\n",
      "200\n",
      "Scrapping page: 361\n",
      "200\n",
      "Scrapping page: 362\n",
      "200\n",
      "Scrapping page: 363\n",
      "200\n",
      "Scrapping page: 364\n",
      "200\n",
      "Scrapping page: 365\n",
      "200\n",
      "Scrapping page: 366\n",
      "200\n",
      "Scrapping page: 367\n",
      "200\n",
      "Scrapping page: 368\n",
      "200\n",
      "Scrapping page: 369\n",
      "200\n",
      "Scrapping page: 370\n",
      "200\n",
      "Scrapping page: 371\n",
      "200\n",
      "Scrapping page: 372\n",
      "200\n",
      "Scrapping page: 373\n",
      "200\n",
      "Scrapping page: 374\n",
      "200\n",
      "Scrapping page: 375\n",
      "200\n",
      "Scrapping page: 376\n",
      "200\n",
      "Scrapping page: 377\n",
      "200\n",
      "Scrapping page: 378\n",
      "200\n",
      "Scrapping page: 379\n",
      "200\n",
      "Scrapping page: 380\n",
      "200\n",
      "Scrapping page: 381\n",
      "200\n",
      "Scrapping page: 382\n",
      "200\n",
      "Scrapping page: 383\n",
      "200\n",
      "Scrapping page: 384\n",
      "200\n",
      "Scrapping page: 385\n",
      "200\n",
      "Scrapping page: 386\n",
      "200\n",
      "Scrapping page: 387\n",
      "200\n",
      "Scrapping page: 388\n",
      "200\n",
      "Scrapping page: 389\n",
      "200\n",
      "Scrapping page: 390\n",
      "200\n",
      "Scrapping page: 391\n",
      "200\n",
      "Scrapping page: 392\n",
      "200\n",
      "Scrapping page: 393\n",
      "200\n",
      "Scrapping page: 394\n",
      "200\n",
      "Scrapping page: 395\n",
      "200\n",
      "Scrapping page: 396\n",
      "200\n",
      "Scrapping page: 397\n",
      "200\n",
      "Scrapping page: 398\n",
      "200\n",
      "Scrapping page: 399\n",
      "200\n",
      "Scrapping page: 400\n",
      "200\n",
      "총 455개의 뉴스 링크를 찾았습니다.\n",
      "완료 1\n",
      "완료 2\n",
      "오류 3\n",
      "오류 4\n",
      "오류 5\n",
      "오류 6\n",
      "완료 7\n",
      "오류 8\n",
      "완료 9\n",
      "완료 10\n",
      "완료 11\n",
      "오류 12\n",
      "완료 13\n",
      "오류 14\n",
      "오류 15\n",
      "완료 16\n",
      "완료 17\n",
      "완료 18\n",
      "완료 19\n",
      "완료 20\n",
      "완료 21\n",
      "완료 22\n",
      "완료 23\n",
      "완료 24\n",
      "완료 25\n",
      "완료 26\n",
      "완료 27\n",
      "완료 28\n",
      "완료 29\n",
      "오류 30\n",
      "완료 31\n",
      "완료 32\n",
      "완료 33\n",
      "완료 34\n",
      "완료 35\n"
     ]
    },
    {
     "ename": "WebDriverException",
     "evalue": "Message: chrome not reachable\n  (Session info: chrome=90.0.4430.93)\n",
     "output_type": "error",
     "traceback": [
      "\u001b[1;31m---------------------------------------------------------------------------\u001b[0m",
      "\u001b[1;31mWebDriverException\u001b[0m                        Traceback (most recent call last)",
      "\u001b[1;32m<ipython-input-15-c3c27255c7e3>\u001b[0m in \u001b[0;36m<module>\u001b[1;34m\u001b[0m\n\u001b[0;32m      2\u001b[0m \u001b[0mdriver\u001b[0m \u001b[1;33m=\u001b[0m \u001b[0mwebdriver\u001b[0m\u001b[1;33m.\u001b[0m\u001b[0mChrome\u001b[0m\u001b[1;33m(\u001b[0m\u001b[0mpath\u001b[0m\u001b[1;33m)\u001b[0m\u001b[1;33m\u001b[0m\u001b[1;33m\u001b[0m\u001b[0m\n\u001b[0;32m      3\u001b[0m \u001b[1;33m\u001b[0m\u001b[0m\n\u001b[1;32m----> 4\u001b[1;33m \u001b[0mNAVER_RESULT\u001b[0m \u001b[1;33m=\u001b[0m \u001b[0mmain\u001b[0m\u001b[1;33m(\u001b[0m\u001b[1;33m)\u001b[0m\u001b[1;33m\u001b[0m\u001b[1;33m\u001b[0m\u001b[0m\n\u001b[0m\u001b[0;32m      5\u001b[0m \u001b[0msave_to_file\u001b[0m\u001b[1;33m(\u001b[0m\u001b[0mNAVER_RESULT\u001b[0m\u001b[1;33m)\u001b[0m\u001b[1;33m\u001b[0m\u001b[1;33m\u001b[0m\u001b[0m\n",
      "\u001b[1;32m<ipython-input-14-daf00f5617a5>\u001b[0m in \u001b[0;36mmain\u001b[1;34m()\u001b[0m\n\u001b[0;32m      4\u001b[0m     \u001b[0mlast_page\u001b[0m \u001b[1;33m=\u001b[0m \u001b[0msearch_PAGE\u001b[0m\u001b[1;33m\u001b[0m\u001b[1;33m\u001b[0m\u001b[0m\n\u001b[0;32m      5\u001b[0m     \u001b[0mnews_links\u001b[0m \u001b[1;33m=\u001b[0m \u001b[0mget_news_links\u001b[0m\u001b[1;33m(\u001b[0m\u001b[0msearch_PAGE\u001b[0m\u001b[1;33m,\u001b[0m \u001b[0mLINK_PAT\u001b[0m\u001b[1;33m)\u001b[0m\u001b[1;33m\u001b[0m\u001b[1;33m\u001b[0m\u001b[0m\n\u001b[1;32m----> 6\u001b[1;33m     \u001b[0mresult\u001b[0m \u001b[1;33m=\u001b[0m \u001b[0mextract_contents\u001b[0m\u001b[1;33m(\u001b[0m\u001b[0mnews_links\u001b[0m\u001b[1;33m)\u001b[0m\u001b[1;33m\u001b[0m\u001b[1;33m\u001b[0m\u001b[0m\n\u001b[0m\u001b[0;32m      7\u001b[0m     \u001b[0mdriver\u001b[0m\u001b[1;33m.\u001b[0m\u001b[0mquit\u001b[0m\u001b[1;33m(\u001b[0m\u001b[1;33m)\u001b[0m\u001b[1;33m\u001b[0m\u001b[1;33m\u001b[0m\u001b[0m\n\u001b[0;32m      8\u001b[0m     \u001b[1;32mreturn\u001b[0m \u001b[0mresult\u001b[0m\u001b[1;33m\u001b[0m\u001b[1;33m\u001b[0m\u001b[0m\n",
      "\u001b[1;32m<ipython-input-12-6a1e21e78f52>\u001b[0m in \u001b[0;36mextract_contents\u001b[1;34m(links)\u001b[0m\n\u001b[0;32m     27\u001b[0m     \u001b[0ma\u001b[0m \u001b[1;33m=\u001b[0m \u001b[1;36m1\u001b[0m\u001b[1;33m\u001b[0m\u001b[1;33m\u001b[0m\u001b[0m\n\u001b[0;32m     28\u001b[0m     \u001b[1;32mfor\u001b[0m \u001b[0mlink\u001b[0m \u001b[1;32min\u001b[0m \u001b[0mlinks\u001b[0m\u001b[1;33m:\u001b[0m\u001b[1;33m\u001b[0m\u001b[1;33m\u001b[0m\u001b[0m\n\u001b[1;32m---> 29\u001b[1;33m         \u001b[0mcontent\u001b[0m \u001b[1;33m=\u001b[0m \u001b[0mextract_info\u001b[0m\u001b[1;33m(\u001b[0m\u001b[1;34mf\"{link}\"\u001b[0m\u001b[1;33m)\u001b[0m \u001b[1;31m# 각 링크에 대해 extract_info함수 추출\u001b[0m\u001b[1;33m\u001b[0m\u001b[1;33m\u001b[0m\u001b[0m\n\u001b[0m\u001b[0;32m     30\u001b[0m         \u001b[0mprint\u001b[0m\u001b[1;33m(\u001b[0m\u001b[0ma\u001b[0m\u001b[1;33m)\u001b[0m\u001b[1;33m\u001b[0m\u001b[1;33m\u001b[0m\u001b[0m\n\u001b[0;32m     31\u001b[0m         \u001b[0mcontents\u001b[0m\u001b[1;33m.\u001b[0m\u001b[0mappend\u001b[0m\u001b[1;33m(\u001b[0m\u001b[0mcontent\u001b[0m\u001b[1;33m)\u001b[0m \u001b[1;31m# 결과 저장\u001b[0m\u001b[1;33m\u001b[0m\u001b[1;33m\u001b[0m\u001b[0m\n",
      "\u001b[1;32m<ipython-input-12-6a1e21e78f52>\u001b[0m in \u001b[0;36mextract_info\u001b[1;34m(url, wait_time, delay_time)\u001b[0m\n\u001b[0;32m      4\u001b[0m \u001b[1;33m\u001b[0m\u001b[0m\n\u001b[0;32m      5\u001b[0m     \u001b[1;31m# html 페이지 읽어오기\u001b[0m\u001b[1;33m\u001b[0m\u001b[1;33m\u001b[0m\u001b[1;33m\u001b[0m\u001b[0m\n\u001b[1;32m----> 6\u001b[1;33m     \u001b[0mhtml\u001b[0m \u001b[1;33m=\u001b[0m \u001b[0mdriver\u001b[0m\u001b[1;33m.\u001b[0m\u001b[0mpage_source\u001b[0m\u001b[1;33m\u001b[0m\u001b[1;33m\u001b[0m\u001b[0m\n\u001b[0m\u001b[0;32m      7\u001b[0m     \u001b[0msoup\u001b[0m \u001b[1;33m=\u001b[0m \u001b[0mBeautifulSoup\u001b[0m\u001b[1;33m(\u001b[0m\u001b[0mhtml\u001b[0m\u001b[1;33m,\u001b[0m \u001b[1;34m'lxml'\u001b[0m\u001b[1;33m)\u001b[0m\u001b[1;33m\u001b[0m\u001b[1;33m\u001b[0m\u001b[0m\n\u001b[0;32m      8\u001b[0m \u001b[1;33m\u001b[0m\u001b[0m\n",
      "\u001b[1;32m~\\anaconda3\\lib\\site-packages\\selenium\\webdriver\\remote\\webdriver.py\u001b[0m in \u001b[0;36mpage_source\u001b[1;34m(self)\u001b[0m\n\u001b[0;32m    677\u001b[0m             \u001b[0mdriver\u001b[0m\u001b[1;33m.\u001b[0m\u001b[0mpage_source\u001b[0m\u001b[1;33m\u001b[0m\u001b[1;33m\u001b[0m\u001b[0m\n\u001b[0;32m    678\u001b[0m         \"\"\"\n\u001b[1;32m--> 679\u001b[1;33m         \u001b[1;32mreturn\u001b[0m \u001b[0mself\u001b[0m\u001b[1;33m.\u001b[0m\u001b[0mexecute\u001b[0m\u001b[1;33m(\u001b[0m\u001b[0mCommand\u001b[0m\u001b[1;33m.\u001b[0m\u001b[0mGET_PAGE_SOURCE\u001b[0m\u001b[1;33m)\u001b[0m\u001b[1;33m[\u001b[0m\u001b[1;34m'value'\u001b[0m\u001b[1;33m]\u001b[0m\u001b[1;33m\u001b[0m\u001b[1;33m\u001b[0m\u001b[0m\n\u001b[0m\u001b[0;32m    680\u001b[0m \u001b[1;33m\u001b[0m\u001b[0m\n\u001b[0;32m    681\u001b[0m     \u001b[1;32mdef\u001b[0m \u001b[0mclose\u001b[0m\u001b[1;33m(\u001b[0m\u001b[0mself\u001b[0m\u001b[1;33m)\u001b[0m\u001b[1;33m:\u001b[0m\u001b[1;33m\u001b[0m\u001b[1;33m\u001b[0m\u001b[0m\n",
      "\u001b[1;32m~\\anaconda3\\lib\\site-packages\\selenium\\webdriver\\remote\\webdriver.py\u001b[0m in \u001b[0;36mexecute\u001b[1;34m(self, driver_command, params)\u001b[0m\n\u001b[0;32m    319\u001b[0m         \u001b[0mresponse\u001b[0m \u001b[1;33m=\u001b[0m \u001b[0mself\u001b[0m\u001b[1;33m.\u001b[0m\u001b[0mcommand_executor\u001b[0m\u001b[1;33m.\u001b[0m\u001b[0mexecute\u001b[0m\u001b[1;33m(\u001b[0m\u001b[0mdriver_command\u001b[0m\u001b[1;33m,\u001b[0m \u001b[0mparams\u001b[0m\u001b[1;33m)\u001b[0m\u001b[1;33m\u001b[0m\u001b[1;33m\u001b[0m\u001b[0m\n\u001b[0;32m    320\u001b[0m         \u001b[1;32mif\u001b[0m \u001b[0mresponse\u001b[0m\u001b[1;33m:\u001b[0m\u001b[1;33m\u001b[0m\u001b[1;33m\u001b[0m\u001b[0m\n\u001b[1;32m--> 321\u001b[1;33m             \u001b[0mself\u001b[0m\u001b[1;33m.\u001b[0m\u001b[0merror_handler\u001b[0m\u001b[1;33m.\u001b[0m\u001b[0mcheck_response\u001b[0m\u001b[1;33m(\u001b[0m\u001b[0mresponse\u001b[0m\u001b[1;33m)\u001b[0m\u001b[1;33m\u001b[0m\u001b[1;33m\u001b[0m\u001b[0m\n\u001b[0m\u001b[0;32m    322\u001b[0m             response['value'] = self._unwrap_value(\n\u001b[0;32m    323\u001b[0m                 response.get('value', None))\n",
      "\u001b[1;32m~\\anaconda3\\lib\\site-packages\\selenium\\webdriver\\remote\\errorhandler.py\u001b[0m in \u001b[0;36mcheck_response\u001b[1;34m(self, response)\u001b[0m\n\u001b[0;32m    240\u001b[0m                 \u001b[0malert_text\u001b[0m \u001b[1;33m=\u001b[0m \u001b[0mvalue\u001b[0m\u001b[1;33m[\u001b[0m\u001b[1;34m'alert'\u001b[0m\u001b[1;33m]\u001b[0m\u001b[1;33m.\u001b[0m\u001b[0mget\u001b[0m\u001b[1;33m(\u001b[0m\u001b[1;34m'text'\u001b[0m\u001b[1;33m)\u001b[0m\u001b[1;33m\u001b[0m\u001b[1;33m\u001b[0m\u001b[0m\n\u001b[0;32m    241\u001b[0m             \u001b[1;32mraise\u001b[0m \u001b[0mexception_class\u001b[0m\u001b[1;33m(\u001b[0m\u001b[0mmessage\u001b[0m\u001b[1;33m,\u001b[0m \u001b[0mscreen\u001b[0m\u001b[1;33m,\u001b[0m \u001b[0mstacktrace\u001b[0m\u001b[1;33m,\u001b[0m \u001b[0malert_text\u001b[0m\u001b[1;33m)\u001b[0m\u001b[1;33m\u001b[0m\u001b[1;33m\u001b[0m\u001b[0m\n\u001b[1;32m--> 242\u001b[1;33m         \u001b[1;32mraise\u001b[0m \u001b[0mexception_class\u001b[0m\u001b[1;33m(\u001b[0m\u001b[0mmessage\u001b[0m\u001b[1;33m,\u001b[0m \u001b[0mscreen\u001b[0m\u001b[1;33m,\u001b[0m \u001b[0mstacktrace\u001b[0m\u001b[1;33m)\u001b[0m\u001b[1;33m\u001b[0m\u001b[1;33m\u001b[0m\u001b[0m\n\u001b[0m\u001b[0;32m    243\u001b[0m \u001b[1;33m\u001b[0m\u001b[0m\n\u001b[0;32m    244\u001b[0m     \u001b[1;32mdef\u001b[0m \u001b[0m_value_or_default\u001b[0m\u001b[1;33m(\u001b[0m\u001b[0mself\u001b[0m\u001b[1;33m,\u001b[0m \u001b[0mobj\u001b[0m\u001b[1;33m,\u001b[0m \u001b[0mkey\u001b[0m\u001b[1;33m,\u001b[0m \u001b[0mdefault\u001b[0m\u001b[1;33m)\u001b[0m\u001b[1;33m:\u001b[0m\u001b[1;33m\u001b[0m\u001b[1;33m\u001b[0m\u001b[0m\n",
      "\u001b[1;31mWebDriverException\u001b[0m: Message: chrome not reachable\n  (Session info: chrome=90.0.4430.93)\n"
     ]
    }
   ],
   "source": [
    "path = \"C:/Users/juyeo/Desktop/상권분석/chromedriver.exe\" # 크롬 드라이버 경로 (본인 크롬 드라이브 저장되어 있는 경로로 변경)\n",
    "driver = webdriver.Chrome(path)\n",
    "\n",
    "NAVER_RESULT = main()\n",
    "save_to_file(NAVER_RESULT)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 'null',
   "metadata": {},
   "outputs": [],
   "source": []
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.8.5"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 4
}
